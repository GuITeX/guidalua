% !TeX program = LuaLaTeX
% filename app-tut/E001-fatt.tex
\documentclass{article}
\newcommand{\fattoriale}[1]{\directlua{
    local n = assert(tonumber(#1))
    local res = 1
    for i = 1, n do
        res = res * i
    end
    tex.print(tostring(res))
}}
\begin{document}
\( 5! = \fattoriale{5} \)
\end{document}